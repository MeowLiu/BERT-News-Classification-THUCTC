# 📰 BERT-NEWS-CLASSIFICATION-THUCTC  
*中文新闻分类系统 · BERT/RoBERTa 微调 · 端到端部署*

> **🎯 项目目标**  
> 基于中文优化版 BERT/RoBERTa 模型，在 THUCNews 数据集构建**高精度新闻分类系统**，集成 FastAPI + React 前后端，实现文本自动分类与可视化。

---

## 🚀 项目进度看板

| 状态       | 任务                          | 详情/进度               |
|------------|-------------------------------|-------------------------|
| ✅ **完成** | 项目初始化                    | 目录结构搭建完成        |
| ✅ **完成** | THUCNews 数据集全量导入       | **836,074** 有效文档 (14类) |
| ✅ **完成** | 数据清洗与预处理              | 94.2% 有效保留率        |
| ✅ **完成** | 数据标准化                    | 分词/停用词过滤         |
| ✅ **完成** | 数据分析                    | 统计文本信息与分析         |
| ✅ **完成** | 环境配置                      | Python 3.10 + PyTorch   |
| ✅ **完成** | 数据增强                      |数据增强30% ，缓解了类别不平衡问题 |
| ✅ **正在进行** | 训练朴素贝叶斯与SVM分类器   | 利用分类器进行文本分类，并最终与BERT比较 |
| 🔴 **待启** | BERT微调训练：增强与未增强之间的对比                 | 预计 2025-12-10 启动    |
| 🔴 **待启** | RoBERTa 微调训练                 | 预计 2025-12-10 启动    |
| 🔴 **待启** | FastAPI构建后端               | 预计 2025-12-10 启动    |
| 🔴 **待启** | React+TypeScript构建前端      | 预计 2025-12-10 启动    |

---

## 📊 全量数据报告

### 📥 数据提取统计 (14/14 类别)
| **指标**       | **值**               | **指标**         | **值**          |
|----------------|----------------------|------------------|-----------------|
| **执行窗口**   | 20:06 ~ 21:20        | **总耗时**       | 1小时14分钟     |
| **总文档数**   | 836,074              | **平均速度**     | 158.5 文件/秒   |
| **空文件过滤** | 14                   | **最大类别**     | 科技 (162,929)  |
| **数据分布**   |                      |                  |                 |
| **头部3类** 🥇 | **尾部3类** 🥉       |                  |                 |
| 科技 (19.5%)   | 星座 (0.4%)          |                  |                 |
| 股票 (18.5%)   | 彩票 (0.9%)          |                  |                 |
| 体育 (15.7%)   | 时尚 (1.6%)          |                  |                 |

### 📈 完整类别统计
| 排名 | 类别 | 有效文件数 | 速度(文件/秒) | 耗时   | 占比  |
|------|------|------------|---------------|--------|-------|
| 1    | 科技 | 162,929    | 178.68        | 15m11s | 19.5% |
| 2    | 股票 | 154,398    | 158.83        | 16m12s | 18.5% |
| 3    | 体育 | 131,603    | 161.68        | 13m33s | 15.7% |
| 4    | 娱乐 | 92,632     | 155.08        | 9m57s  | 11.1% |
| 5    | 时政 | 63,086     | 151.65        | 6m56s  | 7.5%  |
| 6    | 社会 | 50,849     | 156.21        | 5m25s  | 6.1%  |
| 7    | 教育 | 41,936     | 152.71        | 4m34s  | 5.0%  |
| 8    | 财经 | 37,098     | 150.31        | 4m06s  | 4.4%  |
| 9    | 家居 | 32,586     | 153.04        | 3m32s  | 3.9%  |
| 10   | 游戏 | 24,373     | 152.09        | 2m40s  | 2.9%  |
| 11   | 房产 | 20,050     | 161.25        | 2m04s  | 2.4%  |
| 12   | 时尚 | 13,368     | 149.78        | 1m29s  | 1.6%  |
| 13   | 彩票 | 7,588      | 148.93        | 50s    | 0.9%  |
| 14   | 星座 | 3,578      | 151.51        | 23s    | 0.4%  |

> **💡 关键洞察**  
> 1. **头部垄断**：科技+股票+体育占总量 **53.7%**，需警惕模型偏向  
> 2. **长尾挑战**：最小3类（星座/彩票/时尚）仅占 **2.9%**，需过采样策略  
> 3. **IO瓶颈**：股票类处理最慢（158.83 文件/秒），因单文件体积较大  

## 🧹 预处理效果
| **阶段**         | **数据量** | **变化率** | **关键操作**               |
|------------------|------------|------------|----------------------------|
| 原始数据         | 836,088    | 100%       | 14个类别目录               |
| **清洗后有效数据** | **787,500**| **94.1%**| 过滤48,574个过短或过长文件           |
| **数据集划分**   |            |            |                            |
| - 训练集 (70%)   | 585,252    | 🔴 高优先级 |                            |
| - 验证集 (15%)   | 125,411    | 🟠 中优先级 |                            |
| - 测试集 (15%)   | 125,411    | 🟠 中优先级 |                            |


## 🔍 原始数据 vs 清洗后对比

### 📝 典型样本对比
| **原始数据 (Raw)** | **清洗后数据 (Cleaned)** |
|--------------------|--------------------------|
| ```体育马晓旭意外受伤让国奥警惕 无奈大雨格外青睐殷家军\n　　记者傅亚雨沈阳报道 来到沈阳，国奥队...``` | ```体育马晓旭 意外 受伤 国奥 警惕 无奈 大雨 青睐 殷家 军 傅亚雨 沈阳 报道 来到 沈阳 ...``` |
| ```体育揭秘谢亚龙被带走：总局电话骗局 复制南杨轨迹\n　　体坛周报特约记者张锐北京报道  谢亚龙已..``` | ```体育揭秘 谢亚龙 带走 总局 电话 骗局 复制 南杨 轨迹 体坛周报 特约记者 张锐 北京 报道...``` |

**性能指标**  
⏱️ 总耗时：**1小时14分** | ⚡ 峰值速度：**178.68 文件/秒** (科技类) | 💾 最终输出：`data/THUCNews.csv` (836,074条)

## 📊 中文新闻数据集详细统计分析报告

> **概览**：
> * **总新闻数**：787,500 条
> * **类别总数**：14 类
> * **平均字符数**：446.9 字
> * **数据不平衡度**：44.31:1 (极度不平衡)

---

### 1. 📏 基本统计信息
此表展示了各类别的数据规模及文本长度（字符与词数）的均值与中位数。

| 类别 | 新闻数 | 平均字符 | 中位字符 | 平均词数 | 中位词数 |
| :--- | :---: | :---: | :---: | :---: | :---: |
| **财经** | 33,594 | **576.9** | **561.0** | **271.9** | **264.0** |
| **社会** | 46,330 | 542.9 | 483.0 | 261.5 | 232.0 |
| **体育** | 125,673 | 534.2 | 496.0 | 248.8 | 231.0 |
| **教育** | 36,385 | 529.0 | 471.0 | 241.7 | 216.0 |
| **房产** | 18,759 | 474.3 | 383.0 | 224.6 | 185.0 |
| **彩票** | 6,524 | 471.0 | 446.0 | 234.1 | 219.0 |
| **游戏** | 23,429 | 449.6 | 401.0 | 207.5 | 186.0 |
| **科技** | **153,043** | 436.9 | 370.0 | 196.0 | 166.0 |
| **股票** | 146,601 | 417.9 | 352.0 | 193.3 | 162.0 |
| **娱乐** | 88,937 | 412.0 | 339.0 | 193.7 | 159.0 |
| **时政** | 60,683 | 357.7 | 283.0 | 159.9 | 126.0 |
| **时尚** | 13,185 | 350.5 | 284.0 | 166.8 | 136.0 |
| **家居** | 30,903 | 350.4 | 211.0 | 163.8 | 99.0 |
| **星座** | 3,454 | 353.4 | 145.0 | 169.6 | 70.0 |

---

### 2. 📉 字符长度分布
展示文本长度的分布情况，有助于了解是否存在异常短文本或超长文本。

| 类别 | 最小值 | Q25 (下四分位) | 中位数 | Q75 (上四分位) | 最大值 | 标准差 |
| :--- | :---: | :---: | :---: | :---: | :---: | :---: |
| **体育** | 17 | 331 | 496 | 698 | 1427 | 278.7 |
| **娱乐** | 12 | 210 | 339 | 545 | 1524 | 269.9 |
| **家居** | 7 | 71 | 211 | 562 | 1435 | 339.7 |
| **彩票** | 14 | 159 | 446 | 718 | 1410 | 326.6 |
| **房产** | 8 | 300 | 383 | 586 | 1375 | 267.3 |
| **教育** | 10 | 269 | 471 | 742 | **1696** | 331.3 |
| **时尚** | 10 | 169 | 284 | 467 | 1440 | 252.0 |
| **时政** | 15 | 192 | 283 | 444 | 1473 | 251.8 |
| **星座** | 16 | 91 | 145 | 560 | 1367 | **347.5** |
| **游戏** | 9 | 259 | 401 | 582 | 1569 | 257.2 |
| **社会** | 18 | 310 | 483 | 731 | 1457 | 293.9 |
| **科技** | 7 | 238 | 370 | 562 | 1495 | 278.2 |
| **股票** | 7 | 166 | 352 | 606 | 1450 | 301.7 |
| **财经** | 8 | 308 | **561** | **799** | 1402 | 324.4 |

---

### 3. 🗝️ 各类别高频词云 (Top 10)
为了节省篇幅并便于对比，将各类别的前 10 高频词整理如下：

| 类别 | 核心关键词 (按词频降序) |
| :--- | :--- |
| **⚽ 体育** | 比赛, 中, 球员, 球队, 说, 时间, 赛季, 新浪, 分钟, 中国 |
| **🎬 娱乐** | 说, 中, 娱乐, 新浪, 讯, 电影, 做, 北京, 观众, 导演 |
| **🏠 家居** | 产品, 企业, 家具, 品牌, 市场, 中国, 家居, 消费者, 中, 行业 |
| **🎫 彩票** | 期, 号码, 号, 中, 注, 开出, 双色球, 主场, 胜, 平 |
| **🏙️ 房产** | 项目, 平米, 户型, 北京, 元, 楼盘, 开发商, 万, 信息, 均价 |
| **🎓 教育** | 考生, 学生, 高考, 考试, 招生, 录取, 专业, 中, 学校, 信息 |
| **👗 时尚** | 搭配, 中, 吃, 女性, 减肥, 时尚, 组图, 穿, 导语, 身体 |
| **📰 时政** | 说, 美国, 中, 报道, 中国, 国家, 总统, 称, 日电, 政府 |
| **🔮 星座** | 爱情, 星座, 测试, 说, 中, 心理, 图, 爱, 喜欢, 朋友 |
| **🎮 游戏** | 游戏, 玩家, 中, 活动, 网游, 新, 世界, 系统, 中国, 体验 |
| **👀 社会** | 说, 中, 岁, 警方, 发现, 民警, 医院, 孩子, 称, 元 |
| **📱 科技** | 元, 手机, 用户, 中, 公司, 市场, 采用, 中国, 产品, 网络 |
| **📈 股票** | 市场, 公司, 点, 经济, 中, 中国, 增长, 上涨, 亿元, 板块 |
| **💰 财经** | 基金, 市场, 公司, 投资, 期货, 中, 元, 价格, 上涨, 美元 |

---

### 💡 数据分析总结与洞察
#### 1. ⚠️ 严重的数据不平衡
* **现象**：数据集存在极端的类别不平衡。头部类别**科技** (15.3万) 和 **股票** (14.6万) 的数据量远超尾部类别。
* **对比**：最多的“科技”类是最少的“星座”类 (3,454) 的 **44 倍**。
* **建议**：在进行模型训练（如分类任务）时，必须采取**过采样 (Oversampling)**、**欠采样 (Undersampling)** 或使用 **Focal Loss** 等策略，否则模型将极度偏向预测为科技、股票或体育类。

#### 2. 📝 文本长度差异明显
* **长文本类**：**财经、社会、教育、体育**。这些类别的平均长度都在 500 字以上，中位数也较高，说明内容多为深度报道、赛事详述或政策解析。
* **短文本类**：**家居、时尚、星座**。尤其是星座类，中位数仅 145 字符，Q25 甚至只有 91 字符，说明该类别包含大量短句、运势摘要或以图片为主的内容（关键词中包含“组图”）。

#### 3. 🔍 关键词特征分析
* **停用词残留**：虽然进行了清洗，但“说”、“中”、“称”等词在多个类别（娱乐、体育、时政、社会）中依然高频出现。这表明可以进一步优化停用词表，去除这些对分类贡献度较低的通用动词。
* **语义重叠与区分**：
    * **强区分度**：教育（考生/高考）、彩票（双色球/注）、房产（户型/平米）的特征词非常独特，分类难度预计较低。
    * **潜在混淆**：
        * **股票 vs 财经**：两者都高频出现“市场”、“公司”、“上涨”。区别在于股票侧重“点”、“板块”，财经侧重“基金”、“期货”。
        * **科技 vs 家居**：都关注“产品”、“市场”、“品牌”。

#### 4. 🌏 内容地缘与实体
* **时政类**：高频词包含“美国”、“总统”，显示该数据集的国际新闻占比较大，或中美关系是报道重点。
* **地域性**：娱乐和房产类中，“北京”高频出现，暗示数据源（新浪新闻）可能以北京地区的报道或总部采编为主。

## 📊 THUCNews 数据增强分析报告

### 1. 总体概况 (Overview)

本次数据增强旨在解决长尾分布问题，通过 **BERT 上下文增强** 与 **随机删除** 相结合的策略，对尾部类别进行了补充。

| 指标 | 数值 | 备注 |
| :--- | :--- | :--- |
| **原始样本总数** | 787,500 | |
| **增强后总数** | **1,024,937** | |
| **新增样本数** | **+237,437** | 约为原始数据的 30% |
| **目标阈值** | 50,000 | 尾部类别补齐至此数量 |

---

##3 2. 类别不平衡优化 (Imbalance Optimization)

通过增强，类别不平衡问题得到了显著改善，模型训练的公平性将大幅提升。

* **原始类别不平衡度 (Max/Min):** `44.31` (科技 vs 星座)
* **当前类别不平衡度 (Max/Min):** `3.06` (科技 vs 星座/彩票等)
* **优化效果:** 不平衡度降低了 **93%**。

---

##3 3. 详细分布表 (Detailed Distribution)

以下表格展示了增强前后的数量对比，以及新增数据的来源构成（BERT生成 vs 随机删除）。

> **注**：头部类别（数量 > 50,000）保持原样，未进行增强。

| 类别 | 原始数量 (Original) | 增强后数量 (Augmented) | 总增长 (Growth) | 增强构成 (Composition) |
| :--- | :--- | :--- | :--- | :--- |
| **星座** | 3,454 | **50,000** | +46,546 | BERT: 13,963 / Del: 32,583 |
| **彩票** | 6,524 | **50,000** | +43,476 | BERT: 13,042 / Del: 30,434 |
| **时尚** | 13,185 | **50,000** | +36,815 | BERT: 11,044 / Del: 25,771 |
| **房产** | 18,759 | **50,000** | +31,241 | BERT: 9,372 / Del: 21,869 |
| **游戏** | 23,429 | **50,000** | +26,571 | BERT: 7,971 / Del: 18,600 |
| **家居** | 30,903 | **50,000** | +19,097 | BERT: 5,729 / Del: 13,368 |
| **财经** | 33,594 | **50,000** | +16,406 | BERT: 4,921 / Del: 11,485 |
| **教育** | 36,385 | **50,000** | +13,615 | BERT: 4,084 / Del: 9,531 |
| **社会** | 46,330 | **50,000** | +3,670 | BERT: 1,101 / Del: 2,569 |
| **时政** | 60,683 | 60,683 | 0 | - |
| **娱乐** | 88,937 | 88,937 | 0 | - |
| **体育** | 125,673 | 125,673 | 0 | - |
| **股票** | 146,601 | 146,601 | 0 | - |
| **科技** | 153,043 | 153,043 | 0 | - |

---

##3 4. 增强策略总结 (Strategy Summary)

针对需要增强的 9 个尾部类别，采用了混合增强策略：

1.  **BERT 上下文增强 (~30%)**: 生成了高质量、语义连贯的新样本，确保模型学习到更丰富的特征表达。
2.  **随机删除 (~70%)**: 通过模拟噪声输入，防止模型对因重复采样导致的过拟合，同时保证了数据处理的高效率。

**结论**: 数据集结构已从极度长尾分布调整为相对均衡分布，可直接用于后续的模型训练。